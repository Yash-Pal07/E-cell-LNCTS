;/*FB_PKG_DELIM*/

__d("BPlusTree",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=["dir"],i={gt:[!1,0],gte:[!0,0],lt:[!0,1],lte:[!1,1]};a=function(){function a(a,b){b===void 0&&(b=32),this.$3={children:[],isLeaf:!0,keys:[]},this.$4=this.$3,this.$5=this.$3,this.$1=a,this.$2=b}a.fromSorted=function(a,b,c){b=new this(b,c);c=a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();a=c.next();while(!a.done){var d=[],e=b.$5,f;while(!e.isLeaf)d.push([e,-1]),f=e.keys.length,e=e.children[f];f=(b.$2-1)*2;f=f-e.keys.length;while(!a.done&&f>0)e.keys.push(a.value[0]),e.children.push(a.value[1]),f--,a=c.next();b.$6(e,d,!0)}return b};var b=a.prototype;b.$7=function(a,b){var c=this.$5,d=-1;while(!c.isLeaf)b==null||b.push([c,d]),d=this.$8(c.keys,a,i.gt),d===-1&&(d=c.keys.length),c=c.children[d];return[c,d]};b.$8=function(a,b,c){var d=0,e=a.length-1;while(d<=e){var f=d+e>>1;(c[0]?this.$1(a[f],b)<0:this.$1(a[f],b)<=0)?d=f+1:e=f-1}f=[d,e][c[1]];return f===a.length?-1:f};b.$9=function(a,b){if(!a.length){a.push(b);return[0,0]}var c=this.$8(a,b,i.gte);if(c===-1)return[a.push(b)-1,0];else if(this.$1(a[c],b)===0)return[c,1];a.splice(c,0,b);return[c,0]};b.$6=function(a,b,c){for(var a=a,d;a.keys.length>=this.$2;a=d){var d=b.pop()||[this.$5={children:[a],isLeaf:!1,keys:[]}];d=d[0];var e=Math.floor(a.keys.length/2),f=void 0;a.isLeaf?(f=a.next={children:a.children.slice(e),isLeaf:!0,keys:a.keys.slice(e),next:a.next,prev:a},f.next?f.next.prev=f:this.$4=f):f={children:a.children.slice(e+1),isLeaf:!1,keys:a.keys.slice(e+1)};if(c)d.keys.push(a.keys[e]),d.children.push(f);else{var g=this.$9(d.keys,a.keys[e]);g=g[0];d.children.splice(g+1,0,f)}a.keys.length=e;a.children.length=e+(a.isLeaf?0:1)}};b.clear=function(){this.$5=this.$3=this.$4={children:[],isLeaf:!0,keys:[]}};b.delete=function(a){var b=Math.floor(this.$2/2),d=[],e=this.$7(a,d),f=e[0];e=e[1];var g=this.$8(f.keys,a,i.gte);if(g===-1||this.$1(f.keys[g],a)!==0)return!1;f.keys.splice(g,1);f.children.splice(g,1);for(var a=f,g=e,e,f;a.keys.length<b&&d.length;o=[e,f],a=o[0],g=o[1],o){f=d.pop();e=f[0];f=f[1];var h=[[e.children[g-1],a,g-1],[a,e.children[g+1],g]].filter(function(a){var b=a[0];a=a[1];return b&&a});for(var j of h){var k=j[0],l=j[1],m=j[2];if(k.keys.length+l.keys.length>=b*2){if(a.isLeaf){var n=[].concat(k.children,l.children),o=[].concat(k.keys,l.keys);k.children=(l.children=n).splice(0,b);k.keys=(l.keys=o).splice(0,b);e.keys[m]=o[0]}else{n=[].concat(k.children,l.children);o=[].concat(k.keys,[e.keys[m]],l.keys);k.children=(l.children=n).splice(0,b+1);e.keys[m]=o.splice(b,1)[0];k.keys=(l.keys=o).splice(0,b)}return!0}}for(n of h){m=n[0];k=n[1];l=n[2];m.children=[].concat(m.children,k.children);a.isLeaf?(m.keys=[].concat(m.keys,k.keys),k.keys.length=0,k.next?k.next.prev=m:this.$4=m,m.next=k.next):m.keys=[].concat(m.keys,[e.keys[l]],k.keys);e.keys.splice(l,1);e.children.splice(l+1,1);break}}if(!this.$5.keys.length&&this.$5.children.length){j=this.$5;if(j.isLeaf)throw c("FBLogger")("messenger_web").mustfixThrow("cannot be leaf");this.$5=j.children[0]}return!0};b.entries=function(a){var b=this;a=a===void 0?{}:a;var d=a.dir,e=d===void 0?"asc":d,f=babelHelpers.objectWithoutPropertiesLoose(a,h);return function*(){if(Object.prototype.hasOwnProperty.call(f,"gt")&&Object.prototype.hasOwnProperty.call(f,"gte"))throw c("FBLogger")("messenger_web").mustfixThrow("cannot specify both greater than and greater than or equal");if(Object.prototype.hasOwnProperty.call(f,"lt")&&Object.prototype.hasOwnProperty.call(f,"lte"))throw c("FBLogger")("messenger_web").mustfixThrow("cannot specify both less than and less than or equal");if(e==="asc"){if(Object.prototype.hasOwnProperty.call(f,"gt")){var a=b.$7(f.gt);a=a[0]}else if(Object.prototype.hasOwnProperty.call(f,"gte")){var d=b.$7(f.gte);a=d[0]}else a=b.$3;d=Object.prototype.hasOwnProperty.call(f,"gt")?b.$8(a.keys,f.gt,i.gt):Object.prototype.hasOwnProperty.call(f,"gte")?b.$8(a.keys,f.gte,i.gte):0;while(a){var g=a;while(d!==-1&&d<g.keys.length){var h=g.keys[d];if(Object.prototype.hasOwnProperty.call(f,"lt")&&b.$1(h,f.lt)>=0||Object.prototype.hasOwnProperty.call(f,"lte")&&b.$1(h,f.lte)>0)return;var j=(yield [g.keys[d],g.children[d]]);if(j!=null){if(b.$1(j,h)<=0)throw c("FBLogger")("messenger_web").mustfixThrow("key must be greater than current key");d=b.$8(g.keys,j,i.gte);if(d===-1){var k=b.$7(j);g=k[0];d=b.$8(g.keys,j,i.gte)}}else{k=g.keys[d]!==h;if(k){d=b.$8(g.keys,h,i.lte);if(d===-1){j=b.$7(h);g=j[0];d=b.$8(g.keys,h,i.lte)}}d++}}a=g.next;d=0}}else{if(Object.prototype.hasOwnProperty.call(f,"lt")){k=b.$7(f.lt);a=k[0]}else if(Object.prototype.hasOwnProperty.call(f,"lte")){j=b.$7(f.lte);a=j[0]}else a=b.$4;h=Object.prototype.hasOwnProperty.call(f,"lt")?b.$8(a.keys,f.lt,i.lt):Object.prototype.hasOwnProperty.call(f,"lte")?b.$8(a.keys,f.lte,i.lte):a.keys.length-1;while(a){g=a;while(h!==-1&&h>=0){d=g.keys[h];if(Object.prototype.hasOwnProperty.call(f,"gt")&&b.$1(d,f.gt)<=0||Object.prototype.hasOwnProperty.call(f,"gte")&&b.$1(d,f.gte)<0)return;k=(yield [g.keys[h],g.children[h]]);if(k!=null){if(b.$1(k,d)>=0)throw c("FBLogger")("messenger_web").mustfixThrow("key must be less than current key");h=b.$8(g.keys,k,i.lte);if(h===-1){j=b.$7(k);g=j[0];h=b.$8(g.keys,k,i.lte)}}else{j=g.keys[h]!==d;if(j){h=b.$8(g.keys,d,i.gte);if(h===-1){k=b.$7(d);g=k[0];h=b.$8(g.keys,d,i.gte)}}h--}}a=g.prev;h=a!=null?a.keys.length-1:-1}}}()};b.get=function(a){var b=this.$7(a);b=b[0];var d=this.$8(b.keys,a,i.gte);if(d===-1||this.$1(b.keys[d],a)!==0)throw c("FBLogger")("messenger_web").mustfixThrow("key not found: %s",String(a));return b.children[d]};b.getWithDefault=function(a,b){var c=this.$7(a);c=c[0];var d=this.$8(c.keys,a,i.gte);return d===-1||this.$1(c.keys[d],a)!==0?b:c.children[d]};b.has=function(a){var b=this,c=this.$7(a);c=c[0];return c.keys.findIndex(function(c){return b.$1(a,c)===0})!==-1};b.set=function(a,b){var c=[],d=this.$7(a,c);d=d[0];a=this.$9(d.keys,a);var e=a[0];a=a[1];d.children.splice(e,a,b);this.$6(d,c,!1);return this};return a}();g.default=a}),98);
__d("GetLsDatabaseDeferredForDisplay",["asyncToGeneratorRuntime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferredForDisplay")("GetLsDatabase").__setRef("GetLsDatabaseDeferredForDisplay");function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield h.load());return a.get()});return i.apply(this,arguments)}g.get=a}),98);
__d("JSONStringifyBigIntSafe",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return JSON.stringify(a,function(a,b){return typeof b==="bigint"?b.toString():b})};b=a;f["default"]=b}),66);
__d("LSPersistedDbGating",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("8483");b=c("gkx")("8483");g.anyTablesPersisted=a;g.allTablesPersisted=b}),98);
__d("MWLogInteraction",["ExecutionEnvironment","ifRequireable","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(30605361,"6204");function a(a){if((h||(h=c("ExecutionEnvironment"))).isInBrowser){var b=j();b==null||b.cancelTrace(a,!0)}}function b(){if((h||(h=c("ExecutionEnvironment"))).isInBrowser){var a=j();a==null||a.forceCompleteTrace()}}function d(a){if((h||(h=c("ExecutionEnvironment"))).isInBrowser){var b=j();b==null||b.addMarkerPoint(a,"AppTiming")}}function j(){if((h||(h=c("ExecutionEnvironment"))).isInBrowser)return c("ifRequireable")("InteractionTracing",function(a){return Array.from(a.getPendingInteractions()).find(function(a){var b;if(((b=a.getTrace())==null?void 0:b.qplEvent)===i&&((b=a.getTrace())==null?void 0:b.tracePolicy)==="comet.jewel.messenger")return!0})})}function e(a){(h||(h=c("ExecutionEnvironment"))).isInBrowser&&c("ifRequireable")("InteractionTracing",function(b){b.getPendingInteractions().forEach(function(b){b.addMarkerPoint(a,"AppTiming")})})}g.logPopoverOpenCancel=a;g.logPopoverOpenComplete=b;g.logPopoverOpenPoint=d;g.getPopoverTrace=j;g.addPointToInteractionTracing=e}),98);
__d("LSPlatformLsInitLog",["Bootloader","CometResourceScheduler","ErrorGuard","ErrorSerializer","ExecutionEnvironment","MWLogInteraction","QPLUserFlow","VisibilityAPI","VisibilityState","gkx","ifRequired","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(25305590,"1127"),k=!1,l=!1,m=[],n=new Set(["ls_sync_start","gql_fetch_start","gql_mailbox_fetch_end","gql_mailbox_fetch_failed","gql_e2ee_fetch_end","gql_e2ee_fetch_failed","gql_cm_fetch_end","gql_cm_fetch_failed","gql_fetch_end","gql_deps_start","gql_deps_end","ls_sync_execute_start","ls_sync_execute_end","ls_sync_end","get_ls_database_start","get_ls_database_end"]),o=function(){var a=!1,b=!1;return{hasEnded:function(){return b},isRunning:function(){return a},markEnd:function(){a=!1,b=!0},markStart:function(){a=!0}}}(),p=c("gkx")("23405"),q=function(a,b){b&&s({bool:{hidden:!0}}),r(j,"visibility_change_"+(b?"hidden":"visible"))};function a(a){k||(k=!0,l=!1,(h||(h=c("ExecutionEnvironment"))).isInWorker||a===!1?c("QPLUserFlow").start(j,{annotations:{bool:{initiallyHidden:d("VisibilityAPI").isVisibilityHidden(),isArmadilloPublicLaunchUser:p}},cancelOnUnload:!0,timeoutInMs:6e4}):c("QPLUserFlow").startFromNavStart(j,{annotations:{bool:{initiallyHidden:d("VisibilityAPI").isVisibilityHidden(),isArmadilloPublicLaunchUser:p},string:{pageID:c("pageID")}},cancelOnUnload:!0,onFlowTimeout:v,timeoutInMs:(h||(h=c("ExecutionEnvironment"))).canUseDOM?6e4:0}),(h||(h=c("ExecutionEnvironment"))).isInBrowser&&(window.addEventListener("DOMContentLoaded",function(){return y()}),w(y),w(function(){return z("lsModuleStateAfter")}))),d("MWLogInteraction").logPopoverOpenPoint("ls_init_start"),d("VisibilityState").subscribe(q)}function r(a,b,e){t()&&(c("QPLUserFlow").addPoint(a,((h||(h=c("ExecutionEnvironment"))).isInWorker?"worker_":"")+b),e!=null&&c("QPLUserFlow").addAnnotations(a,e),n.has(b)?d("MWLogInteraction").addPointToInteractionTracing(b):d("MWLogInteraction").logPopoverOpenPoint(b))}function s(a){c("QPLUserFlow").addAnnotations(j,a)}function b(a,b){r(j,a,b),d("MWLogInteraction").logPopoverOpenPoint(a)}function e(){t()&&(l=!0,v(),c("QPLUserFlow").endSuccess(j)),d("MWLogInteraction").logPopoverOpenPoint("ls_init_end")}function f(a,b){l=!0;v();b!=null&&s({string:{errorDescription:c("ErrorSerializer").toReadableMessage(b)}});c("QPLUserFlow").endFailure(j,a,{error:b});d("MWLogInteraction").logPopoverOpenPoint("ls_init_fail");b=d("MWLogInteraction").getPopoverTrace();b==null||b.addAnnotation("LSFailReason",a)}function t(){return k&&!l}function u(){return l}function v(){for(var a of m)(i||(i=c("ErrorGuard"))).applyWithGuard(a,null,[])}function w(a){m.push(a)}var x={addAnnotations:function(a){var b=a.bool,c=a["int"];a=a.string;s({bool:b,"int":c,string:a})},addPoint:b,addPointForEvent:r,endFail:f,endSuccess:e,isPending:t,onCompleteOrFail:w,start:a};function y(){var a=document.getElementById("has-finished-comet-page")!=null;s({bool:{hasFinishedCometPage:a}});d("MWLogInteraction").addPointToInteractionTracing("has-finished-comet-page")}function z(a){c("ifRequired")("LSPlatformClient",function(){var b;s({string:(b={},b[a]="ok",b)})},function(){var b,e,f=(e=c("Bootloader")).getComponentDebugState("LSPlatformClient").unresolvedDeps;s({bool:(b={},b[a+"hasDeferredResourcesHanging"]=d("CometResourceScheduler").__debug.getPendingCallbacks().length>0,b[a+"notAvailableHashesError"]=e.__debug.notAvailableResources.size>0,b),bool_array:(b={},b[a+"ResourcesExists"]=Array.from(e.__debug.notAvailableResources).map(function(a){return c("Bootloader").__debug.resources.has(a)}),b),"int":(b={},b[a+"executedDeferredCallback"]=d("CometResourceScheduler").__debug.executedDeferredCallback,b[a+"queuedDeferredCallback"]=d("CometResourceScheduler").__debug.queuedDeferredCallback,b[a+"DiffLoadedResources"]=e.__debug.requested.size-e.__debug.loaded.size,b),string:(b={},b[a]=JSON.stringify({hasResourceError:e.getErrorCount()>0,unresolvedDeps:f}),b)})})}g.LsSync=o;g.start=a;g.addPointForEvent=r;g.addAnnotations=s;g.addPoint=b;g.endSuccess=e;g.fail=f;g.isPending=t;g.hasFinished=u;g.onCompleteOrFail=w;g.lsInitLogger=x;g.annotateModuleBootloaderState=z}),98);
__d("LSLogHistory",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h={},i={client_init:100,client_sync:50,client_task:20,db_dump:200,db_init:100,general:50,ls:50,maw_setup:10,user_experience:200},j=10;function a(){try{return Object.values(h).reduce(function(a,b){return a.concat(b)},[]).sort(function(a,b){return a.date-b.date}).map(function(a){return[a.date.toString(),a.level,a.category,a.event,a.args].join(" | ")})}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("getEntries failed");return[[Date.now().toString(),"error","general","lightspeed_log_event","cannot create entries"].join(" | ")]}}function b(){h={}}function d(a,b,c,d){var e;c===void 0&&(c="general");d===void 0&&(d="lightspeed_log_event");var f=Date.now();h[c]==null&&(h[c]=[]);h[c].length>=((e=i[c])!=null?e:j)&&h[c].shift();h[c].push({args:a,category:c,date:f,event:d,level:b})}g.MAX_LIMIT=i;g.getEntries=a;g.clearEntries=b;g.log=d}),98);
__d("MessengerSimpleLogHistoryFactory",["LSLogHistory"],(function(a,b,c,d,e,f,g){"use strict";a={getInstance:function(a){return{debug:function(b,c){d("LSLogHistory").log(b,"debug",a,c)},error:function(b,c){d("LSLogHistory").log(b,"error",a,c)}}}};g.simpleFactory=a}),98);
__d("MessengerBroadcastLogHistoryFactory",["FBLogger","MessengerSimpleLogHistoryFactory","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){var e=this;this.listener=function(a){var b=d("MessengerSimpleLogHistoryFactory").simpleFactory.getInstance(e.$1);a.level==="error"&&b.error(a.message,"from_"+a.page);a.level==="debug"&&b.debug(a.message,"from_"+a.page)};this.debug=function(a){try{d("MessengerSimpleLogHistoryFactory").simpleFactory.getInstance(e.$1).debug(a);for(var b=arguments.length,f=new Array(b>1?b-1:0),g=1;g<b;g++)f[g-1]=arguments[g];e.$2({args:f,category:e.$1,level:"debug",message:a,page:c("pageID")})}catch(a){c("FBLogger")("messenger_web").catching(a).warn("MessengerLogHistory debug")}};this.error=function(a){try{d("MessengerSimpleLogHistoryFactory").simpleFactory.getInstance(e.$1).error(a);for(var b=arguments.length,f=new Array(b>1?b-1:0),g=1;g<b;g++)f[g-1]=arguments[g];e.$2({args:f,category:e.$1,level:"error",message:a,page:c("pageID")})}catch(a){c("FBLogger")("messenger_web").catching(a).warn("MessengerLogHistory error")}};this.$1=a;this.$2=b};a=function(){function a(){var a=this,b;this.$1={};this.$3="ls_log_history";this.$4=function(b){var c,d=b.args,e=b.category,f=b.level,g=b.message;b=b.page;(c=a.$2)==null||c.postMessage({args:d,category:e,level:f,message:g,page:b})};this.$2=self.BroadcastChannel!=null?new self.BroadcastChannel(this.$3):null;(b=this.$2)==null||b.addEventListener("message",function(b){b=b.data;if((b==null?void 0:b.category)!=null){var c=a.$1[b==null?void 0:b.category];c==null||c.listener(b)}})}var b=a.prototype;b.getInstance=function(a){this.$1[a]||(this.$1[a]=new h(a,this.$4));return this.$1[a]};return a}();g["default"]=a}),98);
__d("MessengerLogHistory",["MessengerSimpleLogHistoryFactory"],(function(a,b,c,d,e,f,g){"use strict";var h={},i=d("MessengerSimpleLogHistoryFactory").simpleFactory;function a(a){i=a}function b(a){h[a]||(h[a]=i.getInstance(a));return h[a]}g.setLogHistoryFactory=a;g.getInstance=b}),98);
__d("LSDatabaseSingleton",["CurrentUser","ExecutionEnvironment","FBLogger","LSPersistedDbGating","LSPlatformLsInitLog","MessengerBroadcastLogHistoryFactory","MessengerLogHistory","Promise","QPLUserFlow","asyncToGeneratorRuntime","cr:1005","cr:10191","cr:1027","cr:3411","cr:7235","getErrorSafe","gkx","ifRequireable","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(a=b("cr:1005"))!=null?a:b("cr:7235");d("LSPersistedDbGating").anyTablesPersisted&&d("MessengerLogHistory").setLogHistoryFactory(new(c("MessengerBroadcastLogHistoryFactory"))());b("cr:1027")==null||b("cr:1027").overwriteSamplingRate();b("cr:10191")==null||b("cr:10191").overwriteSamplingRate();d("LSPlatformLsInitLog").start();e=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=c("gkx")("26383");d("LSPlatformLsInitLog").addPoint("get_ls_database_start",{bool:{is_pdb:d("LSPersistedDbGating").anyTablesPersisted,loadDbEarlierEnabled:a}});c("ifRequireable")("InteractionTracing",function(b){b.getPendingInteractions().forEach(function(b){b.addAnnotationBoolean("loadDbEarlierEnabled",a)})});var e=(yield j.get());d("LSPlatformLsInitLog").addPoint("get_ls_database_end");d("LSPlatformLsInitLog").addPoint("db_created");c("CurrentUser").isWorkUser()&&c("QPLUserFlow").addPoint(c("qpl")._(1036588047,"310"),"db_created");if(b("cr:3411")!==null)try{b("cr:3411").registerDb(e)}catch(a){c("FBLogger")("messenger_browser_clients").catching(c("getErrorSafe")(a)).mustfix("LSPlatformDevtools failed to register db.")}return e});return function(){return a.apply(this,arguments)}}();var k=(i||(i=c("ExecutionEnvironment"))).isInBrowser?e().then(function(a){k=a;return a}):new(h||(h=b("Promise")))(function(){c("FBLogger")("messenger_browser_clients").warn("ExecutionEnvironment.isInBrowser returned false, returning never ending promise")});f=function(){return k};a=(h||(h=b("Promise"))).resolve(k);g.getLSDatabaseSingletonPromiseOrValue=f;g.LSDatabaseSingleton=a}),98);
__d("LSSuspense",["PromiseAnnotate"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return{current:{error:a,state:"Error"}}}function b(a){return{current:{state:"Done",value:a}}}function c(a){var b={current:{promise:a.then(function(a){b.current={state:"Done",value:a};return a})["catch"](function(a){b.current={error:a,state:"Error"}}),state:"Loading"}};return b}function e(){return new WeakMap()}function i(a){if(a.state==="Loading")throw a.promise;else if(a.state==="Error")throw a.error;else return a.value}function f(a){return i(a.current)}function j(a,b,c){var e=a.get(b);if(e!=null)return i(e);e=c();c={promise:e.then(function(c){a.set(b,{state:"Done",value:c});return c})["catch"](function(c){a.set(b,{error:c,state:"Error"})}),state:"Loading"};var f=c.promise;if(f){void (h||(h=d("PromiseAnnotate"))).setDisplayName(f,(f=(h||(h=d("PromiseAnnotate"))).getDisplayName(e))!=null?f:"LSCollection")}a.set(b,c);return i(c)}j={getFromCollection:j,getOrSuspend:f,makeCollection:e,makeWithError:a,makeWithPromise:c,makeWithValue:b};g["default"]=j}),98);
__d("MWPActor.react",["Actor","CurrentMessengerUser","I64","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h,l=k.createContext,m=k.useContext,n=k.useMemo,o=l();function a(){var a=m(o),b=d("Actor").useActor(),c=b[0],e=n(function(){return(i||(i=d("I64"))).of_string(c)},[c]),f=d("CurrentMessengerUser").getPageMessagingMailboxId(),g=n(function(){return f!=="0"?(i||(i=d("I64"))).of_string(f):null},[f]);b=n(function(){return a!=null?a:g!=null?g:e},[e,a,g]);return b}function b(){return p()!=null}function e(){return c("gkx")("3378")}function p(){var a=d("CurrentMessengerUser").getPageMessagingMailboxId();return a==="0"?null:a}function q(a){var b=a.actorId;a=a.children;return b!=null?j.jsx(o.Provider,{value:b,children:a},(i||(i=d("I64"))).to_string(b)):a}q.displayName=q.name+" [from "+f.id+"]";g.useActor=a;g.isAPPlus=b;g.isPromode=e;g.getAPPlusMailboxId=p;g.MWPActorProvider=q}),98);
__d("PromiseOrValue",["FBLogger","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if((h||(h=c("isPromise")))(a)&&(h||(h=c("isPromise")))(b))return a.then(function(a){return b.then(function(b){return[a,b]})});if((h||(h=c("isPromise")))(a))return a.then(function(a){return[a,b]});return(h||(h=c("isPromise")))(b)?b.then(function(b){return[a,b]}):[a,b]}function b(a){var b=a.find(h||(h=c("isPromise")));return!b?a:Promise.all(a)}function d(a,b){return(h||(h=c("isPromise")))(a)?a.then(b):b(a)}function i(a,b){b=b;while(!0){var d=a(b);if((h||(h=c("isPromise")))(d))return d.then(function(b){return b.action==="break"?b.value:i(a,b.value)});if(d.action==="break")return d.value;b=d.value}throw c("FBLogger")("messenger_web").mustfixThrow("wrong loop break in promiseOrValue")}g.all2=a;g.all=b;g.map=d;g.loop=i}),98);
__d("ReStoreKeyComparer",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){if((h||(h=d("I64"))).isI64(a))return"I64";else if(Array.isArray(a))return"Array";else if(typeof a==="string")return"String";else if(typeof a==="number")return"Number";else if(typeof a==="boolean")return"Boolean";else if(a instanceof Date)return"Date";else if(typeof a==="object"&&a!=null)return"Object";else if(a==="undefined")return"Undefined";else if(a===null)return"Null";return"Unknown"}var j=function(a){function b(b,c){b="Expected types to be the same but got "+i(b)+" and "+i(c);return a.call(this,b)||this}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error)),k=function(a){function b(b){b="Unexpected type "+i(b);return a.call(this,b)||this}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error)),l=[[]];a=null;function m(a,b){var c=a===l,d=b===l;if(c&&d)return 0;if(c)return 1;if(d)return-1;if(a===null)return b===null?0:-1;else if(b===null)return 1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;if(Array.isArray(a)){if(!Array.isArray(b)){if(typeof b==="string")return 1;throw new j(a,b)}c=a[0];d=b[0];if(c<d)return-1;if(c>d)return 1;c=a[1];d=b[1];if(c<d)return-1;if(c>d)return 1}else if(typeof a==="string"){if(typeof b!=="string"){if(typeof b==="number"||b instanceof Date)return 1;if(Array.isArray(b))return-1;throw new j(a,b)}if(a<b)return-1;if(a>b)return 1}else if(typeof a==="number"){if(typeof b!=="number"){if(typeof b==="string")return-1;throw new j(a,b)}if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date)){if(typeof b==="string")return-1;throw new j(a,b)}if(a<b)return-1;if(a>b)return 1}else if(typeof a==="boolean"){if(typeof b!=="boolean")throw new j(a,b);if(!a&&b)return-1;if(a&&!b)return 1}else throw new k(a);return 0}function n(a,b){var c;for(c=0;c<a.length&&c<b.length;c++){var d=m(a[c],b[c]);if(d!==0)return d}if(c<a.length)return 1;return c<b.length?-1:0}b=function(a,b){return n(b,a)};g.MAX_KEY=l;g.MIN_KEY=a;g.compareValue=m;g.compareKey=n;g.compareKeyDesc=b}),98);
__d("ReQLBounds",["ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return b.length<a?[].concat(b,[c]):b}function j(a,b){b===void 0&&(b=-1);return i(b,a,(h||(h=d("ReStoreKeyComparer"))).MAX_KEY)}function k(a,b,c){if(a!=null&&b!=null)return(h||(h=d("ReStoreKeyComparer"))).compareKey(a[1],b[1])*c>0?a[0]:b[0];if(a!=null)return a[0];if(b!=null)return b[0]}function l(a,b){return k((a==null?void 0:a.gt)!=null?[{gt:a.gt},j(a.gt)]:(a==null?void 0:a.gte)!=null?[{gte:a.gte},a.gte]:void 0,(b==null?void 0:b.gt)!=null?[{gt:b.gt},j(b.gt)]:(b==null?void 0:b.gte)!=null?[{gte:b.gte},b.gte]:void 0,1)}function m(a,b){return k((a==null?void 0:a.lt)!=null?[{lt:a.lt},a.lt]:(a==null?void 0:a.lte)!=null?[{lte:a.lte},j(a.lte)]:void 0,(b==null?void 0:b.lt)!=null?[{lt:b.lt},b.lt]:(b==null?void 0:b.lte)!=null?[{lte:b.lte},j(b.lte)]:void 0,-1)}function a(a,b){if(a==null)return void 0;a=babelHelpers.extends({},a);a.gt!=null&&(a.gt=i(b,a.gt,(h||(h=d("ReStoreKeyComparer"))).MAX_KEY));a.lte!=null&&(a.lte=i(b,a.lte,(h||(h=d("ReStoreKeyComparer"))).MAX_KEY));return a}function b(a,b,c){a.forEach(function(a){var e=a[0];a=a[1];var f=(e==null?void 0:e.gt)!=null?(h||(h=d("ReStoreKeyComparer"))).compareKey(b,e.gt)>0:(e==null?void 0:e.gte)!=null?(h||(h=d("ReStoreKeyComparer"))).compareKey(b,e.gte)>=0:!0;e=(e==null?void 0:e.lt)!=null?(h||(h=d("ReStoreKeyComparer"))).compareKey(b,e.lt)<0:(e==null?void 0:e.lte)!=null?(h||(h=d("ReStoreKeyComparer"))).compareKey(b,e.lte)<=0:!0;if(f&&e)return c(a)})}function c(a,b){if(b==null)return a;var c=l(b,a);b=m(b,a);if(c!=null&&b!=null)return babelHelpers.extends({},c,b);if(c!=null)return c;if(b!=null)return b}g.nextKey=j;g.getLowerLimit=l;g.getUpperLimit=m;g.extendBounds=a;g.forEachMatchingBounds=b;g.mergeBounds=c}),98);
__d("ReQLGlobalQueryContext",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){return a.get(g)}function b(a,b){a.set(g,b)}var h={contents:void 0,withinSupportedContext:!1};function c(a){var b=h.withinSupportedContext;h.withinSupportedContext=!0;try{return a()}finally{h.withinSupportedContext=b}}f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=h;f.runFromContextThatHandlesThrownPromise=c}),66);
__d("ReQL",["BPlusTree","FBLogger","JSONStringifyBigIntSafe","PromiseOrValue","ReQLBounds","ReQLGlobalQueryContext","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l={bounds:b,filter:f,getKeyRange:o,map:q,take:u};function m(a,b){try{var c=(h||(h=d("ReQLGlobalQueryContext"))).globalQueryContext.contents,e=h.getDependencies(b);e==null&&(h||(h=d("ReQLGlobalQueryContext"))).setDependencies(b,[]);h.globalQueryContext.contents=b;var f,g;try{f=(h||(h=d("ReQLGlobalQueryContext"))).runFromContextThatHandlesThrownPromise(a),g=(h||(h=d("ReQLGlobalQueryContext"))).getDependencies(b)||[]}finally{(h||(h=d("ReQLGlobalQueryContext"))).setDependencies(b,e),h.globalQueryContext.contents=c}return[f,g]}catch(c){if(c instanceof Promise)return c.then(function(){return m(a,b)});throw c}}function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b}function b(a){var b=this;return Object.setPrototypeOf({direction:b.direction,iterator:function(c,e){return b.iterator(c,(i||(i=d("ReQLBounds"))).mergeBounds(a,e))},keyLength:b.keyLength,subscribe:function(c,e){return b.subscribe(c,(i||(i=d("ReQLBounds"))).mergeBounds(a,e))}},l)}var n=Object.setPrototypeOf({direction:"asc",iterator:function(){return{next:function(){return{done:!0}}}},keyLength:0,subscribe:function(){return function(){}}},l);function e(){return n}function f(a){var b=this,e=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(f,g){var h=b.iterator(f,g);return{next:function(b){return(j||(j=d("PromiseOrValue"))).loop(function(b){return(j||(j=d("PromiseOrValue"))).map(h.next(b),function(b){if(b.done)return{action:"break",value:b};var f=b.value,g=f[0];f=f[1];if(a(f)){(i||(i=d("ReQLBounds"))).forEachMatchingBounds(e,g,function(a){a.add(c("JSONStringifyBigIntSafe")(g))});return{action:"break",value:b}}(i||(i=d("ReQLBounds"))).forEachMatchingBounds(e,g,function(a){a.delete(c("JSONStringifyBigIntSafe")(g))});return{action:"continue",value:void 0}})},b)}}},keyLength:b.keyLength,subscribe:function(f,g){var h={},j=new Set();e.set(h,[(i||(i=d("ReQLBounds"))).extendBounds(g,b.keyLength),j]);var k=b.subscribe(function(b,d,e){var g=c("JSONStringifyBigIntSafe")(b);if(d.operation==="add"&&a(d.value)){j.add(g);return f(b,d,e)}if(d.operation==="put"&&a(d.value)){if(j.has(g))return f(b,d,e);j.add(g);return f(b,{operation:"add",value:d.value},e)}if(d.operation==="put"&&j.has(g)){j.delete(g);return f(b,{operation:"delete"},e)}if(d.operation==="delete"&&j.has(g)){j.delete(g);return f(b,d,e)}},g);return function(){e.delete(h);return k()}}},l)}function o(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=this;function f(a){return a.gt!=null?{gt:[].concat(b,a.gt)}:{gte:[].concat(b,a.gte)}}function g(a){return a.lt!=null?{lt:[].concat(b,a.lt)}:{lte:[].concat(b,a.lte)}}function h(a){return a==null?{gte:b,lte:b}:babelHelpers.extends({},a.gte!=null||a.gt!=null?f(a):{gte:b},a.lte!=null||a.lt!=null?g(a):{lte:b})}return Object.setPrototypeOf({direction:e.direction,iterator:function(a,c){var f=e.iterator(a,h(c));return{next:function(a){return(j||(j=d("PromiseOrValue"))).map(f.next(a==null?a:[].concat(b,a)),function(a){return a.done?{done:!0}:{done:!1,value:[a.value[0].slice(b.length),a.value[1]]}})}}},keyLength:e.keyLength-b.length,subscribe:function(a,c){return e.subscribe(function(c,d,e){return a(c.slice(b.length),d,e)},h(c))}},l)}function p(a,b){if(a.direction!==b.direction)throw c("FBLogger")("messenger_web").mustfixThrow("merge join requires iterables to be sorted in the same direction");return Object.setPrototypeOf({direction:a.direction,iterator:function(e,f){var g=a.iterator(e,f),h=b.iterator(e,f),i=h.next();function l(a){return(j||(j=d("PromiseOrValue"))).map(i,function(b){var c=b.done?!0:(k||(k=d("ReStoreKeyComparer"))).compareKey(a,b.value[0])<=0;c=c?b:h.next(a);i=c;return c})}return{next:function(a){return(j||(j=d("PromiseOrValue"))).map(g.next(a),function(a){if(a.done)return{done:!0,value:void 0};var b=a.value;b=b[0];return(j||(j=d("PromiseOrValue"))).map(l(b),function(b){var e=a.value,f=e[0];e=e[1];if(b.done)return{done:!1,value:[f,[e,void 0]]};b=b.value;var g=b[0];b=b[1];g=(k||(k=d("ReStoreKeyComparer"))).compareKey(f,g);if(g>0)throw c("FBLogger")("messenger_web").mustfixThrow("Right iterable should always be equal to or ahead");else if(g<0)return{done:!1,value:[f,[e,void 0]]};else return{done:!1,value:[f,[e,b]]}})})}}},keyLength:Math.max(a.keyLength,b.keyLength),subscribe:function(c,e){var f=!0,g=a.subscribe(async function(a,e,g){return(j||(j=d("PromiseOrValue"))).map(b.iterator(g,{gte:a,lte:a}).next(),function(b){b=b.value;if(!f)return;return c(a,e.operation==="add"?{operation:"add",value:[e.value,b==null?void 0:b[1]]}:e.operation==="put"?{operation:"put",value:[e.value,b==null?void 0:b[1]]}:{operation:"delete"},g)})},e),h=b.subscribe(async function(b,e,g){return(j||(j=d("PromiseOrValue"))).map(a.iterator(g,{gte:b,lte:b}).next(),function(a){if(!f||a.done)return;return c(b,e.operation==="add"?{operation:"add",value:[a.value[1],e.value]}:e.operation==="put"?{operation:"put",value:[a.value[1],e.value]}:{operation:"delete"},g)})},e);return function(){f=!1,g(),h()}}},l)}function q(a){var b=this,e=new Map();function f(a,b,e,f,h){var i=c("JSONStringifyBigIntSafe")(e),k=a.get(i);k==null&&(k=[],a.set(i,k));k.forEach(function(a){return a()});k.length=0;var l=k;h.forEach(function(c){l.push(c.subscribe(function(c,h,i){return(j||(j=d("PromiseOrValue"))).map(g(a,b,e,f,i),function(a){return b(e,{operation:"put",value:a},i)})}))})}function g(b,c,e,g,h){return(j||(j=d("PromiseOrValue"))).map(m(function(){return a(g)},h),function(a){var d=a[0];a=a[1];f(b,c,e,g,a);return d})}function h(a,b){var d=c("JSONStringifyBigIntSafe")(b);if(!a.has(d))return;b=(b=a.get(c("JSONStringifyBigIntSafe")(b)))!=null?b:[];b.forEach(function(a){return a()});b.length=0;a.delete(d)}return Object.setPrototypeOf({direction:b.direction,iterator:function(c,g){var h=b.iterator(c,g);return{next:function(b){return(j||(j=d("PromiseOrValue"))).map(h.next(b),function(g){if(g.done)return g;g=g.value;var b=g[0],h=g[1];return(j||(j=d("PromiseOrValue"))).map(j.map(m(function(){return a(h)},c),function(a){var c=a[0],g=a[1];(i||(i=d("ReQLBounds"))).forEachMatchingBounds(e,b,function(a){var c=a[0];a=a[1];return f(c,a,b,h,g)});return c}),function(a){return{done:!1,value:[b,a]}})})}}},keyLength:b.keyLength,subscribe:function(a,c){var f={},k=new Map();e.set(f,[(i||(i=d("ReQLBounds"))).extendBounds(c,b.keyLength),[k,a]]);var l=b.subscribe(function(b,c,e){if(c.operation==="delete"){h(k,b);return a(b,c,e)}else if(c.operation==="add"){var f=c.value;return(j||(j=d("PromiseOrValue"))).map(g(k,a,b,f,e),function(c){return a(b,{operation:"add",value:c},e)})}else if(c.operation==="put"){f=c.value;return(j||(j=d("PromiseOrValue"))).map(g(k,a,b,f,e),function(c){return a(b,{operation:"put",value:c},e)})}},c);return function(){k.forEach(function(a){a.forEach(function(a){return a()})}),e.delete(f),l()}}},l)}function r(a,b){var c=s(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return e.reduce(function(a,b){return s(a,b)},c)}function s(a,b){if(a.direction!==b.direction)throw c("FBLogger")("messenger_web").mustfixThrow("union requires iterables to be sorted in the same direction");var e=Math.max(a.keyLength,b.keyLength);function f(a,b){return b===0||a.length===0?[]:a.slice(0,b)}function g(a){return a.gt!=null?{gt:f(a.gt,e)}:{gte:f(a.gte,e)}}function h(a){return a.lt!=null?{lt:f(a.lt,e)}:{lte:f(a.lte,e)}}function i(a){return a==null?void 0:babelHelpers.extends({},a.gte!=null||a.gt!=null?g(a):{},a.lte!=null||a.lt!=null?h(a):{})}return Object.setPrototypeOf({direction:a.direction,iterator:function(c,g){var h=a.iterator(c,i(g)),l=b.iterator(c,i(g)),m=h.next(),n=l.next();return{next:function(b){b!==void 0&&(m=h.next(f(b,e)),n=l.next(f(b,e)));return(j||(j=d("PromiseOrValue"))).map(j.all2(m,n),function(b){var c=b[0];b=b[1];function e(a,b){if(a.done)return{done:!0};a={done:!1,value:[[].concat(a.value[0],[b]),a.value[1]]};b?m=h.next():n=l.next();return a}if(c.done)return e(b,!1);if(b.done)return e(c,!0);var f=a.direction==="asc"?[c,b]:[b,c],g=f[0];f=f[1];f=(k||(k=d("ReStoreKeyComparer"))).compareKey((g=g.value)==null?void 0:g[0],(g=f.value)==null?void 0:g[0]);if(f<0)return e(c,!0);else return e(b,!1)})}}},keyLength:e+1,subscribe:function(c,d){var e=a.subscribe(function(a,b,d){return c([].concat(a,[!0]),b,d)},d),f=b.subscribe(function(a,b,d){return c([].concat(a,[!1]),b,d)},d);return function(){e(),f()}}},l)}function t(a,b){if(a.direction!==b.direction)throw c("FBLogger")("messenger_web").mustfixThrow("merge join requires iterables to be sorted in the same direction");return Object.setPrototypeOf({direction:a.direction,iterator:function(c,e){var f=a.iterator(c,e),g=b.iterator(c,e);function h(a){return(j||(j=d("PromiseOrValue"))).loop(function(a){var b=a[0];a=a[1];if(b.done||a.done)return{action:"break",value:{done:!0}};var c=b.value,e=c[0];c=c[1];var h=a.value,i=h[0];h=h[1];var l=(k||(k=d("ReStoreKeyComparer"))).compareKey(e,i);if(l>0)return(j||(j=d("PromiseOrValue"))).map(j.all2(b,g.next(e)),function(a){return{action:"continue",value:a}});else if(l<0)return(j||(j=d("PromiseOrValue"))).map(j.all2(f.next(i),a),function(a){return{action:"continue",value:a}});return{action:"break",value:{done:!1,value:[e,[c,h]]}}},a)}return{next:function(a){return(j||(j=d("PromiseOrValue"))).map(j.all2(f.next(a),g.next(a)),h)}}},keyLength:Math.max(a.keyLength,b.keyLength),subscribe:function(c,e){var f=!0;function g(a,b,e,g,h){return(j||(j=d("PromiseOrValue"))).map(a.iterator(h,{gte:e,lte:e}).next(),function(a){if(a.done||!f)return;a=a.value[1];a=g.operation==="add"?{operation:"add",value:b(g.value,a)}:g.operation==="put"?{operation:"put",value:b(g.value,a)}:g;return c(e,a,h)})}var h=a.subscribe(function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return g.apply(void 0,[b,function(a,b){return[a,b]}].concat(c))},e),i=b.subscribe(function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return g.apply(void 0,[a,function(a,b){return[b,a]}].concat(c))},e);return function(){f=!1,h(),i()}}},l)}function u(a){var b=this,e=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(c,f){var g=b.iterator(c,f),h=0;return{next:function(b){if(h>=a)return{done:!0};else return(j||(j=d("PromiseOrValue"))).map(g.next(b),function(b){b.done||(i||(i=d("ReQLBounds"))).forEachMatchingBounds(e,b.value[0],function(c){var d=c[0];c=c[1];c.contents<=a&&(d.has(b.value[0])||(c.contents+=1,d.set(b.value[0],void 0)))});h+=1;return b})}}},keyLength:b.keyLength,subscribe:function(f,g){var h={},l=b.direction==="asc"?1:-1,m=new(c("BPlusTree"))(function(a,b){return(k||(k=d("ReStoreKeyComparer"))).compareKey(a,b)*-l}),n={contents:0};e.set(h,[(i||(i=d("ReQLBounds"))).extendBounds(g,b.keyLength),[m,n]]);var o=b.subscribe(function(c,g,i){var o,p=(o=m.entries().next().value)==null?void 0:o[0];o=p==null?!0:(k||(k=d("ReStoreKeyComparer"))).compareKey(c,p)*l<=0;if(g.operation==="delete"&&o){var q;n.contents>0&&(m.delete(c),q=f(c,g,i));return(j||(j=d("PromiseOrValue"))).map(q,function(){return(j||(j=d("PromiseOrValue"))).map(b.iterator(i,p==null?void 0:l===1?{gt:p}:{lt:p}).next(),function(a){if(!a.done&&e.has(h)){m.set(a.value[0],void 0);return f(a.value[0],{operation:"add",value:a.value[1]},i)}n.contents>0&&(n.contents-=1)})})}if(g.operation==="add"&&n.contents<a){n.contents+=1;m.set(c,void 0);return f(c,g,i)}if(g.operation==="add"&&o){var r;p!=null&&(m.delete(p),r=f(p,{operation:"delete"},i));return(j||(j=d("PromiseOrValue"))).map(r,function(){m.set(c,void 0);return f(c,g,i)})}if(g.operation==="put"&&o)return f(c,g,i)},g);return function(){e.delete(h);return o()}}},l)}var v=new WeakMap();function w(a,b){var c=v.get(a);if(c!=null)return c;c=b.reduce(function(b,c,d){b[c]=a[d];return b},{});v.set(a,c);return c}function x(a,b,c,e,f){if(f==null||f.length>a.keyFields.length||f.some(function(b){return a.keyFields.indexOf(b)===-1}))return a.entries(b,c,e);var g=a.keys(b,c,e);return{next:function(b){return(j||(j=d("PromiseOrValue"))).map(g.next(b),function(b){return b.done?{done:!0}:{done:!1,value:[b.value,w(b.value,a.keyFields)]}})}}}function y(a,b){return Object.setPrototypeOf({direction:"asc",iterator:function(c,d){return x(a,c,"asc",d,b)},keyLength:a.keyFields.length,subscribe:function(c,d){return a.subscribe(c,d,b)}},l)}function z(a,b){return Object.setPrototypeOf({direction:"desc",iterator:function(c,d){return x(a,c,"desc",d,b)},keyLength:a.keyFields.length,subscribe:function(c,d){return a.subscribe(c,d,b)}},l)}function A(a){var b=[],c=a.iterator(new WeakMap());return Promise.resolve((j||(j=d("PromiseOrValue"))).loop(function(){return(j||(j=d("PromiseOrValue"))).map(c.next(),function(a){if(a.done)return{action:"break",value:b};b.push(a.value[1]);return{action:"continue",value:void 0}})}))}async function B(a){a=a.iterator(new WeakMap());a=await a.next();return a.done?void 0:a.value[1]}async function C(a){a=a.iterator(new WeakMap());a=await a.next();if(a.done)throw c("FBLogger")("messenger_web").mustfixThrow("expected result");return a.value[1]}function D(a,b){var c=new WeakMap();function e(a){return a.gt!=null?{gt:a.gt.slice(1)}:{gte:a.gte.slice(1)}}function f(a){return a.lt!=null?{lt:a.lt.slice(1)}:{lte:a.lte.slice(1)}}function g(a){return a==null?void 0:babelHelpers.extends({},a.gte!=null||a.gt!=null?e(a):{},a.lte!=null||a.lt!=null?f(a):{})}return Object.setPrototypeOf({direction:a.direction,iterator:function(e,f){var g={};if(f){if(f.gt!=null){var h=f.gt,i=(k||(k=d("ReStoreKeyComparer"))).compareValue(b,h[0]);if(i===0)if(h.length===1)return{next:function(){return{done:!0}}};else g.gt=h.slice(1);else if(i<0)return{next:function(){return{done:!0}}}}if(f.gte!=null){h=f.gte;i=(k||(k=d("ReStoreKeyComparer"))).compareValue(b,h[0]);if(i===0)g.gte=h.slice(1);else if(i<0)return{next:function(){return{done:!0}}}}if(f.lte!=null){h=f.lte;i=(k||(k=d("ReStoreKeyComparer"))).compareValue(b,h[0]);if(i===0)h.length!==1&&(g.lte=h.slice(1));else if(i>0)return{next:function(){return{done:!0}}}}if(f.lt!=null){h=f.lt;i=(k||(k=d("ReStoreKeyComparer"))).compareValue(b,h[0]);if(i===0)if(h.length===1)return{next:function(){return{done:!0}}};else g.lt=h.slice(1);else if(i>0)return{next:function(){return{done:!0}}}}}var l=a.iterator(e,g);return{next:function(a){return(j||(j=d("PromiseOrValue"))).map(l.next(a==null?void 0:a.slice(1)),function(a){if(a.done)return{done:!0};var d=c.get(a.value[0]);d==null&&(d=[b].concat(a.value[0]),c.set(a.value[0],d));return{done:!1,value:[d,a.value[1]]}})}}},keyLength:a.keyLength+1,subscribe:function(d,e){return a.subscribe(function(a,e,f){var g=c.get(a);g==null&&(g=[b].concat(a),c.set(a,g));return d(g,e,f)},g(e))}},l)}g.prototype=l;g.key=a;g.empty=e;g.leftJoin=p;g.union=r;g.mergeJoin=t;g.fromTableAscending=y;g.fromTableDescending=z;g.toArrayAsync=A;g.firstAsync=B;g.firstExnAsync=C;g.prependKey=D}),98);
__d("ReQLSuspenseSupportedContextTracking",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;d=h||c("react");var i=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j;function a(){j=i.H}function b(){var a=i.H;return a!=null&&a===j}g.useReStoreTrackInRender=a;g.isWithinReactRenderingContext=b}),98);
__d("SortedAsyncIterable",["PromiseAnnotate","PromiseOrValue","ReQLGlobalQueryContext","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){var b;if((i||(i=d("ReQLGlobalQueryContext"))).globalQueryContext.contents==null){var c=new WeakMap();(i||(i=d("ReQLGlobalQueryContext"))).globalQueryContext.contents=c;return c}c=(i||(i=d("ReQLGlobalQueryContext"))).globalQueryContext.contents;(b=(i||(i=d("ReQLGlobalQueryContext"))).getDependencies(c))==null||b.push(a);return c}function a(a){var b=[],e=a.iterator(l(a)),f=(k||(k=d("PromiseOrValue"))).loop(function(){return(k||(k=d("PromiseOrValue"))).map(e.next(),function(a){if(a.done)return{action:"break",value:b};b.push(a.value);return{action:"continue",value:void 0}})});return(h||(h=c("isPromise")))(f)?(j||(j=d("PromiseAnnotate"))).setDisplayName(f,"ReQL"+(a.uniqueId!=null?"_"+a.uniqueId:"")):f}g.getOrCreateContext=l;g.toArray=a}),98);
__d("applyChangesToBPlusTree",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=!1;for(var e of b){var f=e[0],g=e[1];switch(g.operation){case"delete":a["delete"](f);break;case"put":var i=a.getWithDefault(f,void 0);if(i===g.value)continue;i=(h||(h=d("I64"))).cast(i);if(i!=null){var j=(h||(h=d("I64"))).cast(g.value);if(j!=null&&(h||(h=d("I64"))).equal(i,j))continue}case"add":a.set(f,g.value);break}c=!0}b.length=0;return c}g["default"]=a}),98);
__d("createBPlusTreeFromSorted",["BPlusTree","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return c("BPlusTree").fromSorted(a,b==="asc"?(h||(h=d("ReStoreKeyComparer"))).compareKey:(h||(h=d("ReStoreKeyComparer"))).compareKeyDesc,64)}g["default"]=a}),98);
__d("shallowEqualI64",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])}function j(a,b){if(a===b)return!0;return i(a)&&i(b)?(h||(h=d("I64"))).equal(a,b):!1}function a(a,b){return k(a,b,j)}function k(a,b,c){c===void 0&&(c=function(a,b){return a===b});if(c(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;for(e=0;e<d.length;e++)if(!c(a[d[e]],b[d[e]],d[e]))return!1;return!0}g.shallowEqualI64=a;g.shallowEqual=k}),98);
__d("ReStoreProvider.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.createContext();function a(a){var b=a.children;a=a.db;return i.jsx(j.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.context=j;g.ReStoreProvider=a}),98);
__d("useReStore",["InteractionTracingMetrics","LSDatabaseSingleton","LSSuspense","PromiseAnnotate","ReQLSuspenseSupportedContextTracking","ReStoreProvider.react","react","suspendOrThrowIfUsedInSSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=(m||d("react")).useContext,o=(h||(h=c("LSSuspense"))).makeCollection();function a(){d("ReQLSuspenseSupportedContextTracking").useReStoreTrackInRender();var a=n((l||(l=d("ReStoreProvider.react"))).context);if(a!=null)return a;(i||(i=c("suspendOrThrowIfUsedInSSR")))("useReStore: LSDB is not available in SSR. Switching to client side render");(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton==null&&c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addAnnotationBoolean(a.traceId,"is_lsdb_null",!0)});void (k||(k=d("PromiseAnnotate"))).setDisplayName((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton,"LSDatabaseSingleton");return(h||(h=c("LSSuspense"))).getFromCollection(o,j.LSDatabaseSingleton,function(){return(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton})}g["default"]=a}),98);
__d("ReQLSuspense",["FBLogger","I64","Promise","PromiseAnnotate","PromiseOrValue","ReQL","ReQLGlobalQueryContext","ReQLSuspenseSupportedContextTracking","SortedAsyncIterable","applyChangesToBPlusTree","createBPlusTreeFromSorted","isPromise","promiseDone","react","shallowEqualI64","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p=m||d("react"),q=p.startTransition,r=p.useEffect,s=p.useMemo,t=p.useState;function u(){var a=(o||(o=d("ReQLGlobalQueryContext"))).globalQueryContext.withinSupportedContext===!0;return a?!0:d("ReQLSuspenseSupportedContextTracking").isWithinReactRenderingContext()}function v(a,b,e){e===!0&&!u()&&c("FBLogger")("messenger_web","reqlsuspense_unsupported_use").blameToPreviousFile().mustfix("Detected use of ReQLSuspense method in unsupported context.\ntoArray/first/firstExn can only be used inside the body of a projection function passed to ReQL map operator.\nFor React rendering contexts, please use appropriate hook (useArray/useFirst/useFirstExn) variants instead.");if((i||(i=c("isPromise")))(a))if(b!=null)throw(n||(n=d("PromiseAnnotate"))).setDisplayName(a,b);else throw a;return a}function w(a){var b=[];for(a of a)Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])?b.push(a[0],a[1]):b.push(a,void 0);return b}function x(a){var b=arguments[1];return v(d("SortedAsyncIterable").toArray(a),b,!0).map(function(a){a[0];a=a[1];return a})}function y(a){var b=arguments[1];return x(d("ReQL").prototype.take.call(a,1),b)[0]}function z(a){var b=arguments[1],d=y(a,b);if(d==null)throw c("FBLogger")("messenger_web").mustfixThrow("expected result");return d}function a(a,e){var f=arguments[2],g=s(function(){var b=a();b.uniqueId=f;return b},e==null?[a]:w(e)),i=s(function(){return v(d("SortedAsyncIterable").toArray(g)).map(function(a){a[0];a=a[1];return a})},[g]),l=t([i,g]),m=l[0],n=l[1],o=(j||(j=c("useReStore")))();r(function(){var a,e=[],f=g.subscribe(function(a,b){return void e.push([a,b])});function i(){if(e.length&&a!=null){var b=a;c("applyChangesToBPlusTree")(b,e)&&n([Array.from(b.entries(),function(a){return a[1]}),g])}}var j=F(o,i);c("promiseDone")((h||(h=b("Promise"))).resolve((k||(k=d("PromiseOrValue"))).map(d("SortedAsyncIterable").toArray(g),function(b){a=c("createBPlusTreeFromSorted")(b,g.direction);var f=a;c("applyChangesToBPlusTree")(f,e);q(function(){return n(function(a){var b=Array.from(f.entries(),function(a){return a[1]});return d("shallowEqualI64").shallowEqualI64(a[0],b)&&a[1]===g?a:[b,g]})})})));return function(){j(),f()}},[g,o]);return g===m[1]?m[0]:i}function A(a,e){var f=arguments[2],g=s(function(){var b=a().take(1);b.uniqueId=f;return b},e==null?[a]:w(e)),i=s(function(){var a;return(a=v(g.iterator(d("SortedAsyncIterable").getOrCreateContext(g)).next(),f).value)==null?void 0:a[1]},[g,f]),m=t([i,g]),n=m[0],o=m[1],p=(j||(j=c("useReStore")))();r(function(){var a,e=!1,f=g.subscribe(function(b,c){switch(c.operation){case"delete":a=void 0;break;case"put":if(a===c.value)return;b=(l||(l=d("I64"))).cast(a);if(b!=null){var f=(l||(l=d("I64"))).cast(c.value);if(f!=null&&(l||(l=d("I64"))).equal(b,f))return}case"add":a=c.value;break}e=!0}),i=F(p,function(){e&&(e=!1,o([a,g]))});c("promiseDone")((h||(h=b("Promise"))).resolve((k||(k=d("PromiseOrValue"))).map(g.iterator(d("SortedAsyncIterable").getOrCreateContext(g)).next(),function(b){var c;q(function(){return o(function(a){var c;return a[0]===((c=b.value)==null?void 0:c[1])&&a[1]===g?a:[(c=b.value)==null?void 0:c[1],g]})});a=(c=b.value)==null?void 0:c[1]})));return function(){i(),f()}},[g,p]);return g===n[1]?n[0]:i}function e(a,b){var d=arguments[2],e=A(a,b,d);if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("expected result");return e}function B(a,b,c,e){var f=s(function(){var b=a();b.uniqueId=c;return b},b==null?[a]:w(b));return s(function(){return(o||(o=d("ReQLGlobalQueryContext"))).runFromContextThatHandlesThrownPromise(function(){return e(f)})},[f,e])}function f(a,b){return B(a,b,arguments[2],x)}function C(a,b){return B(a,b,arguments[2],y)}function D(a,b){return B(a,b,arguments[2],z)}var E=new Map();function F(a,b){var c=E.get(a);if(c==null){var d=new Map();c={handlers:d,unsubscribe:a.subscribeToCommit(function(){q(function(){return d.forEach(function(a){return a()})})})};E.set(a,c)}var e={};c.handlers.set(e,b);var f=c;return function(){f.handlers["delete"](e),f.handlers.size===0&&(f.unsubscribe(),E["delete"](a))}}g.toArray=x;g.first=y;g.firstExn=z;g.useArray=a;g.useFirst=A;g.useFirstExn=e;g.useArrayWithoutSubscribing=f;g.useFirstWithoutSubscribing=C;g.useFirstExnWithoutSubscribing=D}),98);